{% extends "paginas/modelo.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% load crispy_forms_filters %}
{% load widget_tweaks %}

{% block title %}
<title>Cadastrar Servidor</title>
{% endblock title %}

{% block content %}

<style>
  body {
    background-image: url("{% static 'img/fundorh.jpg' %}");
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
  }

  body::before {
    content: "";
    position: fixed;
    inset: 0;
    background-color: rgba(0, 0, 0, 0.4);
    z-index: -1;
  }
</style>

<div class="container d-flex justify-content-center align-items-center min-vh-100">
  <div class="card shadow-lg rounded-4 p-4 w-100 " style="width: 70vw; max-width: 1200px; min-height: 80vh;">
    <h2 class="mb-4 text-center">Cadastro de Servidor</h2>

    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}

      <div class="row g-4">
        <!-- Primeira Coluna -->
        <div class="col-md-4">
          <div class="mb-4">{{ form.foto.label_tag }} {{ form.foto|add_class:"form-control" }}</div>
          <div class="mb-4">{{ form.ultima_lotacao.label_tag }} {{ form.ultima_lotacao|add_class:"form-control" }}</div>
          <div class="mb-4">{{ form.proxima_promocao.label_tag }} {{ form.proxima_promocao|add_class:"form-control" }}</div>
          <div class="mb-4">{{ form.municipio.label_tag }} {{ form.municipio|add_class:"form-control" }}</div>
          <div class="mb-4">{{ form.formacao.label_tag }} {{ form.formacao|add_class:"form-control" }}</div>
          <div class="mb-4">{{ form.sexo.label_tag }} {{ form.sexo|add_class:"form-control" }}</div>
        </div>

        <!-- Segunda Coluna -->
        <div class="col-md-4">
          <div class="mb-4">{{ form.cargo.label_tag }} {{ form.cargo|add_class:"form-control" }}</div>
          <div class="mb-4">{{ form.data_admissao.label_tag }} {{ form.data_admissao|add_class:"form-control" }}</div>
          <div class="mb-4">{{ form.matricula.label_tag }} {{ form.matricula|add_class:"form-control" }}</div>
          <div class="mb-4">{{ form.email.label_tag }} {{ form.email|add_class:"form-control" }}</div>
          <div class="mb-4">{{ form.situacao.label_tag }} {{ form.situacao|add_class:"form-control" }}</div>
        </div>

        <!-- Terceira Coluna -->
        <div class="col-md-4">
          <div class="mb-4">{{ form.nome.label_tag }} {{ form.nome|add_class:"form-control" }}</div>
          <div class="mb-4">{{ form.lotacao.label_tag }} {{ form.lotacao|add_class:"form-control" }}</div>
          <div class="mb-4">{{ form.telefone.label_tag }} {{ form.telefone|add_class:"form-control" }}</div>
          <div class="mb-4">{{ form.cedido.label_tag }} {{ form.cedido|add_class:"form-control" }}</div>
          <div class="mb-4">{{ form.classe.label_tag }} {{ form.classe|add_class:"form-control" }}</div>
          <div class="mb-4">{{ form.documentacao.label_tag }} {{ form.documentacao|add_class:"form-control" }}</div>
        </div>
        
      
        <div><h5>Período de férias</h5></div>

<div id="ferias-container">
  <div class="ferias-bloco row border p-3 rounded mb-3 position-relative">
    <div class="col-md-4">
      <div class="mb-3">
        {{ form.mesFerias.label_tag }}
        {{ form.mesFerias|add_class:"form-control" }}
      </div>
    </div>

    <div class="col-md-4">
      <div class="mb-3">
        {{ form.inicioferias.label_tag }}
        {{ form.inicioferias|add_class:"form-control" }}
      </div>
    </div>

    <div class="col-md-4">
      <div class="mb-3">
        {{ form.terminoferias.label_tag }}
        {{ form.terminoferias|add_class:"form-control" }}
      </div>
    </div>

    <div class="col-md-6">
      <div class="mb-3">
        {{ form.origem.label_tag }}
        {{ form.origem|add_class:"form-control" }}
      </div>
    </div>

    <div class="col-md-6">
      <div class="mb-3">
        {{ form.cancelamentos.label_tag }}
        {{ form.cancelamentos|add_class:"form-control" }}
      </div>
    </div>
    
  </div>
</div>

<!-- Botão para adicionar novo bloco -->
<div class="mb-4 d-flex gap-2">
  <button type="button" class="btn btn-success" onclick="adicionarFerias()"><i class="fa-solid fa-square-plus"></i> Adicionar período</button>
  <button type="button" class="btn btn-danger" onclick="removerUltimoFerias()"><i class="fa-solid fa-trash"></i> Remover período</button>
</div>

        <div class="mb-5 mt-3">
          {{ form.observacao.label_tag }} {{ form.observacao|add_class:"form-control" }}
        </div>             
      

      <div class="mt-4 text-center">
        <button type="submit" class="btn btn-primary me-2">Salvar</button>
         <a class="btn btn-warning" href="{% url 'listar-servidores' %}">Voltar</a>
      </div>
    </form>
  </div>
</div>
{% endblock content %}


